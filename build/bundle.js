var app=function(){"use strict";function t(){}const e=t=>t;function n(t){return t()}function o(){return Object.create(null)}function r(t){t.forEach(n)}function s(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}const l="undefined"!=typeof window;let u=l?()=>window.performance.now():()=>Date.now(),i=l?t=>requestAnimationFrame(t):t;const a=new Set;function d(t){a.forEach(e=>{e.c(t)||(a.delete(e),e.f())}),0!==a.size&&i(d)}function f(t,e){t.appendChild(e)}function p(t,e,n){t.insertBefore(e,n||null)}function h(t){t.parentNode.removeChild(t)}function m(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function g(t){return document.createElement(t)}function $(t){return document.createTextNode(t)}function v(){return $(" ")}function w(){return $("")}function y(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function _(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function b(t,e){e=""+e,t.data!==e&&(t.data=e)}function x(t,e,n){t.classList[n?"add":"remove"](e)}const k=new Set;let S,C=0;function P(t,e,n,o,r,s,c,l=0){const u=16.666/o;let i="{\n";for(let t=0;t<=1;t+=u){const o=e+(n-e)*s(t);i+=100*t+`%{${c(o,1-o)}}\n`}const a=i+`100% {${c(n,1-n)}}\n}`,d=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(a)}_${l}`,f=t.ownerDocument;k.add(f);const p=f.__svelte_stylesheet||(f.__svelte_stylesheet=f.head.appendChild(g("style")).sheet),h=f.__svelte_rules||(f.__svelte_rules={});h[d]||(h[d]=!0,p.insertRule(`@keyframes ${d} ${a}`,p.cssRules.length));const m=t.style.animation||"";return t.style.animation=`${m?m+", ":""}${d} ${o}ms linear ${r}ms 1 both`,C+=1,d}function B(t,e){const n=(t.style.animation||"").split(", "),o=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),r=n.length-o.length;r&&(t.style.animation=o.join(", "),C-=r,C||i(()=>{C||(k.forEach(t=>{const e=t.__svelte_stylesheet;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.__svelte_rules={}}),k.clear())}))}function L(t){S=t}function E(){if(!S)throw new Error("Function called outside component initialization");return S}const A=[],N=[],O=[],R=[],M=Promise.resolve();let j=!1;function z(t){O.push(t)}let K=!1;const q=new Set;function I(){if(!K){K=!0;do{for(let t=0;t<A.length;t+=1){const e=A[t];L(e),V(e.$$)}for(A.length=0;N.length;)N.pop()();for(let t=0;t<O.length;t+=1){const e=O[t];q.has(e)||(q.add(e),e())}O.length=0}while(A.length);for(;R.length;)R.pop()();j=!1,K=!1,q.clear()}}function V(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(z)}}let F;function T(t,e,n){t.dispatchEvent(function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(`${e?"intro":"outro"}${n}`))}const D=new Set;let U;function H(){U={r:0,c:[],p:U}}function J(){U.r||r(U.c),U=U.p}function W(t,e){t&&t.i&&(D.delete(t),t.i(e))}function Y(t,e,n,o){if(t&&t.o){if(D.has(t))return;D.add(t),U.c.push(()=>{D.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}}const G={duration:0};function Q(n,o,c,l){let f=o(n,c),p=l?0:1,h=null,m=null,g=null;function $(){g&&B(n,g)}function v(t,e){const n=t.b-p;return e*=Math.abs(n),{a:p,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function w(o){const{delay:s=0,duration:c=300,easing:l=e,tick:w=t,css:y}=f||G,_={start:u()+s,b:o};o||(_.group=U,U.r+=1),h?m=_:(y&&($(),g=P(n,p,o,c,s,l,y)),o&&w(0,1),h=v(_,c),z(()=>T(n,o,"start")),function(t){let e;0===a.size&&i(d),new Promise(n=>{a.add(e={c:t,f:n})})}(t=>{if(m&&t>m.start&&(h=v(m,c),m=null,T(n,h.b,"start"),y&&($(),g=P(n,p,h.b,h.duration,0,l,f.css))),h)if(t>=h.end)w(p=h.b,1-p),T(n,h.b,"end"),m||(h.b?$():--h.group.r||r(h.group.c)),h=null;else if(t>=h.start){const e=t-h.start;p=h.a+h.d*l(e/h.duration),w(p,1-p)}return!(!h&&!m)}))}return{run(t){s(f)?(F||(F=Promise.resolve(),F.then(()=>{F=null})),F).then(()=>{f=f(),w(t)}):w(t)},end(){$(),h=m=null}}}function X(t,e){Y(t,1,1,()=>{e.delete(t.key)})}function Z(t){t&&t.c()}function tt(t,e,o){const{fragment:c,on_mount:l,on_destroy:u,after_update:i}=t.$$;c&&c.m(e,o),z(()=>{const e=l.map(n).filter(s);u?u.push(...e):r(e),t.$$.on_mount=[]}),i.forEach(z)}function et(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function nt(t,e){-1===t.$$.dirty[0]&&(A.push(t),j||(j=!0,M.then(I)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ot(e,n,s,c,l,u,i=[-1]){const a=S;L(e);const d=n.props||{},f=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:l,bound:o(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:[]),callbacks:o(),dirty:i};let p=!1;if(f.ctx=s?s(e,d,(t,n,...o)=>{const r=o.length?o[0]:n;return f.ctx&&l(f.ctx[t],f.ctx[t]=r)&&(f.bound[t]&&f.bound[t](r),p&&nt(e,t)),n}):[],f.update(),p=!0,r(f.before_update),f.fragment=!!c&&c(f.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);f.fragment&&f.fragment.l(t),t.forEach(h)}else f.fragment&&f.fragment.c();n.intro&&W(e.$$.fragment),tt(e,n.target,n.anchor),I()}L(a)}class rt{$destroy(){et(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}function st(t){let e,n;return{c(){e=g("img"),_(e,"loading","lazy"),e.src!==(n=t[1])&&_(e,"src",n),_(e,"alt",""),_(e,"class","svelte-okjk95")},m(t,n){p(t,e,n)},p(t,o){2&o&&e.src!==(n=t[1])&&_(e,"src",n)},d(t){t&&h(e)}}}function ct(e){let n,o,r,s,c,l,u=e[0].link.title+"",i=e[1]&&st(e);return{c(){n=g("a"),o=g("div"),i&&i.c(),r=v(),s=g("p"),c=$(u),_(s,"class","svelte-okjk95"),_(o,"class","link svelte-okjk95"),_(n,"href",l=e[0].link.url),_(n,"target","_blank")},m(t,e){p(t,n,e),f(n,o),i&&i.m(o,null),f(o,r),f(o,s),f(s,c)},p(t,[e]){t[1]?i?i.p(t,e):(i=st(t),i.c(),i.m(o,r)):i&&(i.d(1),i=null),1&e&&u!==(u=t[0].link.title+"")&&b(c,u),1&e&&l!==(l=t[0].link.url)&&_(n,"href",l)},i:t,o:t,d(t){t&&h(n),i&&i.d()}}}function lt(t,e,n){let o,{att:r}=e;if(r.link.photo){const t=Object.keys(r.link.photo).filter(t=>t.includes("photo")),e=Math.floor(t.length/2);o=r.link.photo[t[e]]}return t.$set=t=>{"att"in t&&n(0,r=t.att)},[r,o]}class ut extends rt{constructor(t){super(),ot(this,t,lt,ct,c,{att:0})}}function it(e){let n,o;return{c(){n=g("img"),_(n,"loading","lazy"),n.src!==(o=e[0])&&_(n,"src",o),_(n,"alt",""),_(n,"srcset",""),_(n,"class","svelte-wwxt9")},m(t,e){p(t,n,e)},p:t,i:t,o:t,d(t){t&&h(n)}}}function at(t,e,n){let{photo:o}=e;const r=function(t,e){const n=Object.keys(t).filter(t=>t.includes("photo"));let o;for(let r=0;r<n.length;r++){if(n[r].split("_")[1]>=e||r===n.length-1){o=t[n[r]];break}}return o}(o,600);return t.$set=t=>{"photo"in t&&n(1,o=t.photo)},[r,o]}class dt extends rt{constructor(t){super(),ot(this,t,at,it,c,{photo:1})}}function ft(e){let n,o;return{c(){n=g("video"),n.src!==(o=e[1])&&_(n,"src",o),_(n,"poster",e[0]),_(n,"preload","none"),n.controls=!0,_(n,"type","video/mp4"),_(n,"class","svelte-11r8rfd")},m(t,e){p(t,n,e)},p:t,i:t,o:t,d(t){t&&h(n)}}}function pt(t,e,n){let{att:o}=e;const r=o.doc.preview.photo.sizes[0].src,s=o.doc.preview.video&&o.doc.preview.video.src||o.doc.url;return t.$set=t=>{"att"in t&&n(2,o=t.att)},[r,s,o]}class ht extends rt{constructor(t){super(),ot(this,t,pt,ft,c,{att:2})}}function mt(e){let n,o,r,s=JSON.stringify(e[0])+"";return{c(){n=g("p"),o=$("Unsupported attachment: "),r=$(s),_(n,"class","svelte-3z90vw")},m(t,e){p(t,n,e),f(n,o),f(n,r)},p(t,e){1&e&&s!==(s=JSON.stringify(t[0])+"")&&b(r,s)},i:t,o:t,d(t){t&&h(n)}}}function gt(e){let n,o,r,s=e[0].podcast.title+"";return{c(){n=g("p"),o=$("Podcast: "),r=$(s),_(n,"class","svelte-3z90vw")},m(t,e){p(t,n,e),f(n,o),f(n,r)},p(t,e){1&e&&s!==(s=t[0].podcast.title+"")&&b(r,s)},i:t,o:t,d(t){t&&h(n)}}}function $t(t){let e;const n=new ut({props:{att:t[0]}});return{c(){Z(n.$$.fragment)},m(t,o){tt(n,t,o),e=!0},p(t,e){const o={};1&e&&(o.att=t[0]),n.$set(o)},i(t){e||(W(n.$$.fragment,t),e=!0)},o(t){Y(n.$$.fragment,t),e=!1},d(t){et(n,t)}}}function vt(e){let n,o,r,s=e[0].doc.title+"";return{c(){n=g("p"),o=$("Doc: "),r=$(s),_(n,"class","svelte-3z90vw")},m(t,e){p(t,n,e),f(n,o),f(n,r)},p(t,e){1&e&&s!==(s=t[0].doc.title+"")&&b(r,s)},i:t,o:t,d(t){t&&h(n)}}}function wt(t){let e;const n=new ht({props:{att:t[0]}});return{c(){Z(n.$$.fragment)},m(t,o){tt(n,t,o),e=!0},p(t,e){const o={};1&e&&(o.att=t[0]),n.$set(o)},i(t){e||(W(n.$$.fragment,t),e=!0)},o(t){Y(n.$$.fragment,t),e=!1},d(t){et(n,t)}}}function yt(t){let e,n,o;const r=new dt({props:{photo:t[0].video}});return{c(){e=g("span"),e.textContent="Video frame:",n=v(),Z(r.$$.fragment),_(e,"class","svelte-3z90vw")},m(t,s){p(t,e,s),p(t,n,s),tt(r,t,s),o=!0},p(t,e){const n={};1&e&&(n.photo=t[0].video),r.$set(n)},i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){Y(r.$$.fragment,t),o=!1},d(t){t&&h(e),t&&h(n),et(r,t)}}}function _t(t){let e;const n=new dt({props:{photo:t[0].photo}});return{c(){Z(n.$$.fragment)},m(t,o){tt(n,t,o),e=!0},p(t,e){const o={};1&e&&(o.photo=t[0].photo),n.$set(o)},i(t){e||(W(n.$$.fragment,t),e=!0)},o(t){Y(n.$$.fragment,t),e=!1},d(t){et(n,t)}}}function bt(t){let e,n,o,r;const s=[_t,yt,wt,vt,$t,gt,mt],c=[];function l(t,e){return"photo"===t[0].type?0:"video"===t[0].type?1:"doc"===t[0].type&&"gif"===t[0].doc.ext?2:"doc"===t[0].type&&"pdf"===t[0].doc.ext?3:"link"===t[0].type?4:"podcast"===t[0].type?5:"podcast"===t[0].type?6:-1}return~(n=l(t))&&(o=c[n]=s[n](t)),{c(){e=g("div"),o&&o.c()},m(t,o){p(t,e,o),~n&&c[n].m(e,null),r=!0},p(t,[r]){let u=n;n=l(t),n===u?~n&&c[n].p(t,r):(o&&(H(),Y(c[u],1,1,()=>{c[u]=null}),J()),~n?(o=c[n],o||(o=c[n]=s[n](t),o.c()),W(o,1),o.m(e,null)):o=null)},i(t){r||(W(o),r=!0)},o(t){Y(o),r=!1},d(t){t&&h(e),~n&&c[n].d()}}}function xt(t,e,n){let{att:o}=e;return t.$set=t=>{"att"in t&&n(0,o=t.att)},[o]}class kt extends rt{constructor(t){super(),ot(this,t,xt,bt,c,{att:0})}}function St(t,e,n){const o=t.slice();return o[12]=e[n],o[14]=n,o}function Ct(t,e,n){const o=t.slice();return o[12]=e[n],o[14]=n,o}function Pt(e){let n;return{c(){n=g("h4"),n.textContent=""+e[6]},m(t,e){p(t,n,e)},p:t,d(t){t&&h(n)}}}function Bt(e){let n;const o=new kt({props:{att:e[12]}});return{c(){Z(o.$$.fragment)},m(t,e){tt(o,t,e),n=!0},p:t,i(t){n||(W(o.$$.fragment,t),n=!0)},o(t){Y(o.$$.fragment,t),n=!1},d(t){et(o,t)}}}function Lt(e){let n,o,r,s,c,l,u,i=e[5].text&&function(e){let n;return{c(){n=g("p"),n.textContent=""+e[5].text,_(n,"class","text svelte-ubrdmt")},m(t,e){p(t,n,e)},p:t,d(t){t&&h(n)}}}(e),a=e[5].attachments&&function(t){let e,n,o=t[5].attachments,r=[];for(let e=0;e<o.length;e+=1)r[e]=Et(St(t,o,e));const s=t=>Y(r[t],1,1,()=>{r[t]=null});return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=w()},m(t,o){for(let e=0;e<r.length;e+=1)r[e].m(t,o);p(t,e,o),n=!0},p(t,n){if(32&n){let c;for(o=t[5].attachments,c=0;c<o.length;c+=1){const s=St(t,o,c);r[c]?(r[c].p(s,n),W(r[c],1)):(r[c]=Et(s),r[c].c(),W(r[c],1),r[c].m(e.parentNode,e))}for(H(),c=o.length;c<r.length;c+=1)s(c);J()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)W(r[t]);n=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)Y(r[t]);n=!1},d(t){m(r,t),t&&h(e)}}}(e);return{c(){n=g("div"),o=g("p"),o.textContent=""+e[5].date,r=v(),s=g("h4"),s.textContent=""+e[5].sourceName,c=v(),i&&i.c(),l=v(),a&&a.c(),_(o,"class","date svelte-ubrdmt"),_(n,"class","post svelte-ubrdmt")},m(t,e){p(t,n,e),f(n,o),f(n,r),f(n,s),f(n,c),i&&i.m(n,null),f(n,l),a&&a.m(n,null),u=!0},p(t,e){t[5].text&&i.p(t,e),t[5].attachments&&a.p(t,e)},i(t){u||(W(a),u=!0)},o(t){Y(a),u=!1},d(t){t&&h(n),i&&i.d(),a&&a.d()}}}function Et(e){let n;const o=new kt({props:{att:e[12]}});return{c(){Z(o.$$.fragment)},m(t,e){tt(o,t,e),n=!0},p:t,i(t){n||(W(o.$$.fragment,t),n=!0)},o(t){Y(o.$$.fragment,t),n=!1},d(t){et(o,t)}}}function At(e){let n,o,r,s,c,l,u,i,a,d,y,b=e[1]&&Pt(e),k=e[7]&&function(e){let n;return{c(){n=g("p"),n.textContent=""+e[7],_(n,"class","text svelte-ubrdmt")},m(t,e){p(t,n,e)},p:t,d(t){t&&h(n)}}}(e),S=e[8]&&function(t){let e,n,o=t[8],r=[];for(let e=0;e<o.length;e+=1)r[e]=Bt(Ct(t,o,e));const s=t=>Y(r[t],1,1,()=>{r[t]=null});return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=w()},m(t,o){for(let e=0;e<r.length;e+=1)r[e].m(t,o);p(t,e,o),n=!0},p(t,n){if(256&n){let c;for(o=t[8],c=0;c<o.length;c+=1){const s=Ct(t,o,c);r[c]?(r[c].p(s,n),W(r[c],1)):(r[c]=Bt(s),r[c].c(),W(r[c],1),r[c].m(e.parentNode,e))}for(H(),c=o.length;c<r.length;c+=1)s(c);J()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)W(r[t]);n=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)Y(r[t]);n=!1},d(t){m(r,t),t&&h(e)}}}(e),C=e[5]&&Lt(e);return{c(){n=g("div"),o=g("p"),o.textContent=""+e[4],r=v(),b&&b.c(),s=v(),k&&k.c(),c=v(),S&&S.c(),l=v(),C&&C.c(),u=v(),i=g("p"),a=g("a"),d=$(e[3]),_(o,"class","date svelte-ubrdmt"),_(a,"href",e[3]),_(a,"target","_blank"),_(n,"class","post svelte-ubrdmt"),_(n,"data-post-uid",e[9]),x(n,"seen",e[0].seen)},m(t,h){p(t,n,h),f(n,o),f(n,r),b&&b.m(n,null),f(n,s),k&&k.m(n,null),f(n,c),S&&S.m(n,null),f(n,l),C&&C.m(n,null),f(n,u),f(n,i),f(i,a),f(a,d),e[11](n),y=!0},p(t,[e]){t[1]?b?b.p(t,e):(b=Pt(t),b.c(),b.m(n,s)):b&&(b.d(1),b=null),t[7]&&k.p(t,e),t[8]&&S.p(t,e),t[5]&&C.p(t,e),1&e&&x(n,"seen",t[0].seen)},i(t){y||(W(S),W(C),y=!0)},o(t){Y(S),Y(C),y=!1},d(t){t&&h(n),b&&b.d(),k&&k.d(),S&&S.d(),C&&C.d(),e[11](null)}}}function Nt(t,e,n){let{post:o}=e,{observer:r}=e,{showPostSource:s}=e;const{postUrl:c,date:l,repost:u,sourceName:i,text:a,attachments:d,uid:f}=o;let p;var h;return h=()=>{r&&r.observe(p)},E().$$.on_mount.push(h),function(t){E().$$.on_destroy.push(t)}(()=>{r&&r.unobserve(p)}),t.$set=t=>{"post"in t&&n(0,o=t.post),"observer"in t&&n(10,r=t.observer),"showPostSource"in t&&n(1,s=t.showPostSource)},[o,s,p,c,l,u,i,a,d,f,r,function(t){N[t?"unshift":"push"](()=>{n(2,p=t)})}]}class Ot extends rt{constructor(t){super(),ot(this,t,Nt,At,c,{post:0,observer:10,showPostSource:1})}}function Rt(t,e,n){const o=t.slice();return o[5]=e[n],o[7]=n,o}function Mt(t,e){let n,o;const r=new Ot({props:{post:e[5],observer:e[2],showPostSource:e[1]}});return{key:t,first:null,c(){n=w(),Z(r.$$.fragment),this.first=n},m(t,e){p(t,n,e),tt(r,t,e),o=!0},p(t,e){const n={};1&e&&(n.post=t[5]),2&e&&(n.showPostSource=t[1]),r.$set(n)},i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){Y(r.$$.fragment,t),o=!1},d(t){t&&h(n),et(r,t)}}}function jt(t){let e,n,o=[],r=new Map,s=t[0];const c=t=>t[5].uid;for(let e=0;e<s.length;e+=1){let n=Rt(t,s,e),l=c(n);r.set(l,o[e]=Mt(l,n))}return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=w()},m(t,r){for(let e=0;e<o.length;e+=1)o[e].m(t,r);p(t,e,r),n=!0},p(t,[n]){if(7&n){const s=t[0];H(),o=function(t,e,n,o,r,s,c,l,u,i,a,d){let f=t.length,p=s.length,h=f;const m={};for(;h--;)m[t[h].key]=h;const g=[],$=new Map,v=new Map;for(h=p;h--;){const t=d(r,s,h),l=n(t);let u=c.get(l);u?o&&u.p(t,e):(u=i(l,t),u.c()),$.set(l,g[h]=u),l in m&&v.set(l,Math.abs(h-m[l]))}const w=new Set,y=new Set;function _(t){W(t,1),t.m(l,a,c.has(t.key)),c.set(t.key,t),a=t.first,p--}for(;f&&p;){const e=g[p-1],n=t[f-1],o=e.key,r=n.key;e===n?(a=e.first,f--,p--):$.has(r)?!c.has(o)||w.has(o)?_(e):y.has(r)?f--:v.get(o)>v.get(r)?(y.add(o),_(e)):(w.add(r),f--):(u(n,c),f--)}for(;f--;){const e=t[f];$.has(e.key)||u(e,c)}for(;p;)_(g[p-1]);return g}(o,n,c,1,t,s,r,e.parentNode,X,Mt,e,Rt),J()}},i(t){if(!n){for(let t=0;t<s.length;t+=1)W(o[t]);n=!0}},o(t){for(let t=0;t<o.length;t+=1)Y(o[t]);n=!1},d(t){for(let e=0;e<o.length;e+=1)o[e].d(t);t&&h(e)}}}function zt(t,e,n){let{posts:o}=e,{onPostRead:r}=e,{showPostSource:s}=e;const c=new IntersectionObserver((t,e)=>{t.forEach(t=>{const{boundingClientRect:n,isIntersecting:s,target:c}=t;if(!s&&n.bottom<=0){const{postUid:t}=c.dataset;o.find(e=>e.uid===t).markSeen(),r(),e.unobserve(c)}}),n(0,o)},{threshold:0});return t.$set=t=>{"posts"in t&&n(0,o=t.posts),"onPostRead"in t&&n(3,r=t.onPostRead),"showPostSource"in t&&n(1,s=t.showPostSource)},[o,s,c,r]}class Kt extends rt{constructor(t){super(),ot(this,t,zt,jt,c,{posts:0,onPostRead:3,showPostSource:1})}}function qt(e){let n,o,r,s;return{c(){n=$("Icons made by\n"),o=g("a"),o.textContent="Kiranshastry",r=$("\nfrom\n"),s=g("a"),s.textContent="www.flaticon.com",_(o,"href","https://www.flaticon.com/authors/kiranshastry"),_(o,"title","Kiranshastry"),_(s,"href","https://www.flaticon.com/"),_(s,"title","Flaticon")},m(t,e){p(t,n,e),p(t,o,e),p(t,r,e),p(t,s,e)},p:t,i:t,o:t,d(t){t&&h(n),t&&h(o),t&&h(r),t&&h(s)}}}class It extends rt{constructor(t){super(),ot(this,t,null,qt,c,{})}}function Vt(t){let e,n,o,r,s,c,l;return{c(){e=g("span"),n=$("Feed: "),o=$(t[0]),r=$(" -- Read: "),s=$(t[1]),c=$("/"),l=$(t[2]),_(e,"class","read-counter svelte-m1gua8")},m(t,u){p(t,e,u),f(e,n),f(e,o),f(e,r),f(e,s),f(e,c),f(e,l)},p(t,e){1&e&&b(o,t[0]),2&e&&b(s,t[1]),4&e&&b(l,t[2])},d(t){t&&h(e)}}}function Ft(t){let e,n;return{c(){e=g("button"),e.innerHTML='<img class="exit-icon svelte-m1gua8" src="icons/door.svg" alt="">',_(e,"class","logout svelte-m1gua8")},m(o,r,c){p(o,e,r),c&&n(),n=y(e,"click",(function(){s(t[4])&&t[4].apply(this,arguments)}))},p(e,n){t=e},d(t){t&&h(e),n()}}}function Tt(e){let n,o,r=e[2]&&Vt(e),s=e[3]&&Ft(e);return{c(){n=g("nav"),r&&r.c(),o=v(),s&&s.c(),_(n,"class","svelte-m1gua8")},m(t,e){p(t,n,e),r&&r.m(n,null),f(n,o),s&&s.m(n,null)},p(t,[e]){t[2]?r?r.p(t,e):(r=Vt(t),r.c(),r.m(n,o)):r&&(r.d(1),r=null),t[3]?s?s.p(t,e):(s=Ft(t),s.c(),s.m(n,null)):s&&(s.d(1),s=null)},i:t,o:t,d(t){t&&h(n),r&&r.d(),s&&s.d()}}}function Dt(t,e,n){let{source:o}=e,{readCount:r}=e,{totalCount:s}=e,{shouldShowLogoutBtn:c}=e,{handleLogoutClick:l}=e;return t.$set=t=>{"source"in t&&n(0,o=t.source),"readCount"in t&&n(1,r=t.readCount),"totalCount"in t&&n(2,s=t.totalCount),"shouldShowLogoutBtn"in t&&n(3,c=t.shouldShowLogoutBtn),"handleLogoutClick"in t&&n(4,l=t.handleLogoutClick)},[o,r,s,c,l]}class Ut extends rt{constructor(t){super(),ot(this,t,Dt,Tt,c,{source:0,readCount:1,totalCount:2,shouldShowLogoutBtn:3,handleLogoutClick:4})}}function Ht(t){const e=t-1;return e*e*e+1}function Jt(t){return--t*t*t*t*t+1}function Wt(t,{delay:e=0,duration:n=400,easing:o=Ht,x:r=0,y:s=0,opacity:c=0}){const l=getComputedStyle(t),u=+l.opacity,i="none"===l.transform?"":l.transform,a=u*(1-c);return{delay:e,duration:n,easing:o,css:(t,e)=>`\n\t\t\ttransform: ${i} translate(${(1-t)*r}px, ${(1-t)*s}px);\n\t\t\topacity: ${u-a*e}`}}function Yt(t,e,n){const o=t.slice();return o[9]=e[n],o}function Gt(t){let e,n,o,r,s,c,l,u=Object.keys(t[1]),i=[];for(let e=0;e<u.length;e+=1)i[e]=Xt(Yt(t,u,e));return{c(){e=g("div"),n=g("div");for(let t=0;t<i.length;t+=1)i[t].c();o=v(),r=g("button"),r.textContent="Close",_(n,"class","sources svelte-1auaqm7"),_(r,"class","close svelte-1auaqm7"),_(e,"class","popup shadow svelte-1auaqm7")},m(s,u,a){p(s,e,u),f(e,n);for(let t=0;t<i.length;t+=1)i[t].m(n,null);f(e,o),f(e,r),c=!0,a&&l(),l=y(r,"click",t[3])},p(t,e){if(3&e){let o;for(u=Object.keys(t[1]),o=0;o<u.length;o+=1){const r=Yt(t,u,o);i[o]?i[o].p(r,e):(i[o]=Xt(r),i[o].c(),i[o].m(n,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=u.length}},i(n){c||(z(()=>{s||(s=Q(e,Wt,t[4],!0)),s.run(1)}),c=!0)},o(n){s||(s=Q(e,Wt,t[4],!1)),s.run(0),c=!1},d(t){t&&h(e),m(i,t),t&&s&&s.end(),l()}}}function Qt(e){let n,o,r,s;return{c(){n=g("button"),n.innerHTML='<img class="filter-icon svelte-1auaqm7" src="icons/filter.svg" alt="">',_(n,"class","filter-btn shadow svelte-1auaqm7")},m(t,o,c){p(t,n,o),r=!0,c&&s(),s=y(n,"click",e[3])},p:t,i(t){r||(z(()=>{o||(o=Q(n,Wt,e[4],!0)),o.run(1)}),r=!0)},o(t){o||(o=Q(n,Wt,e[4],!1)),o.run(0),r=!1},d(t){t&&h(n),t&&o&&o.end(),s()}}}function Xt(t){let e,n,o,r,s,c,l,u,i,a=t[9]+"",d=t[1][t[9]].filter(te).length+"";return{c(){e=g("label"),n=g("input"),r=v(),s=$(a),c=$(" ("),l=$(d),u=$(")\r\n        "),_(n,"type","radio"),n.__value=o=t[9],n.value=n.__value,t[8][0].push(n)},m(o,a,d){p(o,e,a),f(e,n),n.checked=n.__value===t[0],f(e,r),f(e,s),f(e,c),f(e,l),f(e,u),d&&i(),i=y(n,"change",t[7])},p(t,e){2&e&&o!==(o=t[9])&&(n.__value=o),n.value=n.__value,1&e&&(n.checked=n.__value===t[0]),2&e&&a!==(a=t[9]+"")&&b(s,a),2&e&&d!==(d=t[1][t[9]].filter(te).length+"")&&b(l,d)},d(o){o&&h(e),t[8][0].splice(t[8][0].indexOf(n),1),i()}}}function Zt(t){let e,n,o,r;const s=[Qt,Gt],c=[];function l(t,e){return t[2]?0:1}return e=l(t),n=c[e]=s[e](t),{c(){n.c(),o=w()},m(t,n){c[e].m(t,n),p(t,o,n),r=!0},p(t,[r]){let u=e;e=l(t),e===u?c[e].p(t,r):(H(),Y(c[u],1,1,()=>{c[u]=null}),J(),n=c[e],n||(n=c[e]=s[e](t),n.c()),W(n,1),n.m(o.parentNode,o))},i(t){r||(W(n),r=!0)},o(t){Y(n),r=!1},d(t){c[e].d(t),t&&h(o)}}}const te=t=>!t.seen;function ee(t,e,n){let{newsBySource:o}=e,{current:r}=e,{total:s}=e,{onCurrentChanged:c}=e,l=!0;const u={y:1e3,opacity:.5,easing:Jt};return t.$set=t=>{"newsBySource"in t&&n(1,o=t.newsBySource),"current"in t&&n(0,r=t.current),"total"in t&&n(5,s=t.total),"onCurrentChanged"in t&&n(6,c=t.onCurrentChanged)},t.$$.update=()=>{65&t.$$.dirty&&c(r)},[r,o,l,function(){n(2,l=!l)},u,s,c,function(){r=this.__value,n(0,r)},[[]]]}class ne extends rt{constructor(t){super(),ot(this,t,ee,Zt,c,{newsBySource:1,current:0,total:5,onCurrentChanged:6})}}const oe=8194..toString();function re(t){return new Date(1e3*t)}function se(t){return`${t.getFullYear()}-${t.getMonth()}-${t.getDate()}`}VK.init({apiId:7412293});class ce{static hasPostBeenSeen(t){return function(t,e){const n=localStorage.getItem("seenPosts_"+se(e));return!!n&&n.includes(t+";")}(`${t.source_id}_${t.post_id}`,re(t.date))}constructor(t,e){this.sourceName=e[-t.source_id],this.uid=`${t.source_id}_${t.post_id}`,this.postUrl="https://vk.com/wall"+this.uid,this._date=re(t.date),this.date=this._date.toLocaleString("ru"),this.text=t.text,this.seen=ce.hasPostBeenSeen(t);const[n]=t.copy_history||[];n&&(this.repost={sourceName:e[-n.from_id],date:re(n.date).toLocaleString("ru"),attachments:n.attachments,text:n.text}),this.attachments=t.attachments}markSeen(){this.seen||(!function(t,e){const n="seenPosts_"+se(e),o=localStorage.getItem(n)||"";localStorage.setItem(n,`${o}${t};`)}(this.uid,this._date),this.seen=!0)}}function le(){return new Promise((t,e)=>{VK.Api.call("newsfeed.get",{v:"5.73",return_banned:0,count:100,filters:"post",source_ids:"groups,pages"},(function({response:n}){if(console.log("getNews -> response",n),!n)return void e(new Error("Failed to load posts"));const o=function(t){const e={};return t.forEach(t=>{e[t.id]=t.name}),e}(n.groups),r=n.items.filter(t=>!ce.hasPostBeenSeen(t)).map(t=>new ce(t,o));var s,c;t({All:r,...(s=r,c="sourceName",s.reduce((function(t,e){return(t[e[c]]=t[e[c]]||[]).push(e),t}),{}))})}))})}function ue(e){let n;return{c(){n=g("p"),n.textContent="Loading...",_(n,"class","centered svelte-dmrcf")},m(t,e){p(t,n,e)},p:t,i:t,o:t,d(t){t&&h(n)}}}function ie(e){let n,o,r=e[0].message+"";return{c(){var t,e,s;n=g("p"),o=$(r),_(n,"class","centered svelte-dmrcf"),t="color",e="red",n.style.setProperty(t,e,s?"important":"")},m(t,e){p(t,n,e),f(n,o)},p(t,e){1&e&&r!==(r=t[0].message+"")&&b(o,r)},i:t,o:t,d(t){t&&h(n)}}}function ae(t){let e,n,o,r;const s=[pe,fe],c=[];function l(t,e){return t[4].length>0?0:1}return e=l(t),n=c[e]=s[e](t),{c(){n.c(),o=w()},m(t,n){c[e].m(t,n),p(t,o,n),r=!0},p(t,r){let u=e;e=l(t),e===u?c[e].p(t,r):(H(),Y(c[u],1,1,()=>{c[u]=null}),J(),n=c[e],n||(n=c[e]=s[e](t),n.c()),W(n,1),n.m(o.parentNode,o))},i(t){r||(W(n),r=!0)},o(t){Y(n),r=!1},d(t){c[e].d(t),t&&h(o)}}}function de(e){let n,o,r;return{c(){n=g("p"),o=g("button"),o.textContent="Log in with VK",_(n,"class","centered svelte-dmrcf")},m(t,s,c){p(t,n,s),f(n,o),c&&r(),r=y(o,"click",e[9])},p:t,i:t,o:t,d(t){t&&h(n),r()}}}function fe(e){let n;return{c(){n=g("p"),n.textContent="There's nothing new in your feed! Well done!",_(n,"class","centered svelte-dmrcf")},m(t,e){p(t,n,e)},p:t,i:t,o:t,d(t){t&&h(n)}}}function pe(t){let e,n;const o=new Kt({props:{posts:t[4],onPostRead:t[10],showPostSource:t[6]}});return{c(){e=g("div"),Z(o.$$.fragment),_(e,"class","top")},m(t,r){p(t,e,r),tt(o,e,null),n=!0},p(t,e){const n={};16&e&&(n.posts=t[4]),64&e&&(n.showPostSource=t[6]),o.$set(n)},i(t){n||(W(o.$$.fragment,t),n=!0)},o(t){Y(o.$$.fragment,t),n=!1},d(t){t&&h(e),et(o)}}}function he(e){let n,o,r;return{c(){n=g("p"),o=g("button"),o.innerHTML='<img class="refresh-icon svelte-dmrcf" src="icons/refresh.svg" alt="">',_(o,"class","refresh-button svelte-dmrcf"),_(n,"class","centered svelte-dmrcf")},m(t,s,c){p(t,n,s),f(n,o),c&&r(),r=y(o,"click",e[11])},p:t,d(t){t&&h(n),r()}}}function me(t){let e;const n=new ne({props:{newsBySource:t[3],total:t[3].All.length,current:t[2],onCurrentChanged:t[12]}});return{c(){Z(n.$$.fragment)},m(t,o){tt(n,t,o),e=!0},p(t,e){const o={};8&e&&(o.newsBySource=t[3]),8&e&&(o.total=t[3].All.length),4&e&&(o.current=t[2]),n.$set(o)},i(t){e||(W(n.$$.fragment,t),e=!0)},o(t){Y(n.$$.fragment,t),e=!1},d(t){et(n,t)}}}function ge(t){let e,n,o,r,s,c,l,u,i,a,d;const m=new Ut({props:{source:t[2],totalCount:t[7],readCount:t[5],shouldShowLogoutBtn:t[1],handleLogoutClick:t[8]}}),$=[de,ae,ie,ue],y=[];function b(t,e){return!1===t[1]?0:t[4]?1:t[0]?2:3}o=b(t),r=y[o]=$[o](t);let x=t[1]&&t[4]&&he(t);const k=new It({});let S=t[3]&&me(t);return{c(){Z(m.$$.fragment),e=v(),n=g("main"),r.c(),s=v(),c=g("div"),x&&x.c(),l=v(),u=g("p"),Z(k.$$.fragment),i=v(),S&&S.c(),a=w(),_(u,"class","credits centered svelte-dmrcf"),_(c,"class","bottom svelte-dmrcf"),_(n,"class","svelte-dmrcf")},m(t,r){tt(m,t,r),p(t,e,r),p(t,n,r),y[o].m(n,null),f(n,s),f(n,c),x&&x.m(c,null),f(c,l),f(c,u),tt(k,u,null),p(t,i,r),S&&S.m(t,r),p(t,a,r),d=!0},p(t,[e]){const u={};4&e&&(u.source=t[2]),128&e&&(u.totalCount=t[7]),32&e&&(u.readCount=t[5]),2&e&&(u.shouldShowLogoutBtn=t[1]),m.$set(u);let i=o;o=b(t),o===i?y[o].p(t,e):(H(),Y(y[i],1,1,()=>{y[i]=null}),J(),r=y[o],r||(r=y[o]=$[o](t),r.c()),W(r,1),r.m(n,s)),t[1]&&t[4]?x?x.p(t,e):(x=he(t),x.c(),x.m(c,l)):x&&(x.d(1),x=null),t[3]?S?(S.p(t,e),W(S,1)):(S=me(t),S.c(),W(S,1),S.m(a.parentNode,a)):S&&(H(),Y(S,1,1,()=>{S=null}),J())},i(t){d||(W(m.$$.fragment,t),W(r),W(k.$$.fragment,t),W(S),d=!0)},o(t){Y(m.$$.fragment,t),Y(r),Y(k.$$.fragment,t),Y(S),d=!1},d(t){et(m,t),t&&h(e),t&&h(n),y[o].d(),x&&x.d(),et(k),t&&h(i),S&&S.d(t),t&&h(a)}}}function $e(t,e,n){let o,r,s,c,l,u,i,a="All";function d(){n(3,s)}return(async()=>{try{n(1,r=await new Promise((t,e)=>{VK.Auth.getLoginStatus(({status:e})=>{t("connected"===e)})})),r&&(n(3,s=await le()),console.log("newsBySource",s))}catch(t){n(0,o=t)}})(),t.$$.update=()=>{12&t.$$.dirty&&n(4,c=s&&s[a]),16&t.$$.dirty&&n(5,l=c&&c.filter(t=>t.seen).length),4&t.$$.dirty&&n(6,u="All"===a),16&t.$$.dirty&&n(7,i=c&&c.length)},[o,r,a,s,c,l,u,i,async function(){confirm("Are you sure?")&&(await new Promise((t,e)=>{VK.Auth.logout(()=>{t()})}),n(1,r=!1),n(4,c=void 0),localStorage.clear())},async function(){try{n(1,r=await new Promise((t,e)=>{VK.Auth.login(({session:e})=>{t(Boolean(e))},oe)})),r&&n(3,s=await le())}catch(t){n(0,o=t)}},d,async function(){c.forEach(t=>{t.markSeen()}),async function(){window.scrollTo(0,0),n(3,s=await le()),console.log("refresh -> newsBySource",s),console.log("refresh -> newsBySource[source]",s[a]),s[a]||n(2,a="All");d()}()},function(t){t!==a&&(n(2,a=t),n(4,c=s[a]))}]}return history.scrollRestoration="manual",new class extends rt{constructor(t){super(),ot(this,t,$e,ge,c,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
