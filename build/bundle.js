var app=function(){"use strict";function t(){}const e=t=>t;function n(t){return t()}function o(){return Object.create(null)}function s(t){t.forEach(n)}function r(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function l(e,n,o){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}const u="undefined"!=typeof window;let i=u?()=>window.performance.now():()=>Date.now(),a=u?t=>requestAnimationFrame(t):t;const f=new Set;function d(t){f.forEach(e=>{e.c(t)||(f.delete(e),e.f())}),0!==f.size&&a(d)}function p(t,e){t.appendChild(e)}function m(t,e,n){t.insertBefore(e,n||null)}function h(t){t.parentNode.removeChild(t)}function g(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function $(t){return document.createElement(t)}function v(t){return document.createTextNode(t)}function y(){return v(" ")}function w(){return v("")}function b(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function _(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function x(t,e){e=""+e,t.data!==e&&(t.data=e)}function k(t,e,n){t.classList[n?"add":"remove"](e)}const S=new Set;let C,N=0;function z(t,e,n,o,s,r,c,l=0){const u=16.666/o;let i="{\n";for(let t=0;t<=1;t+=u){const o=e+(n-e)*r(t);i+=100*t+`%{${c(o,1-o)}}\n`}const a=i+`100% {${c(n,1-n)}}\n}`,f=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(a)}_${l}`,d=t.ownerDocument;S.add(d);const p=d.__svelte_stylesheet||(d.__svelte_stylesheet=d.head.appendChild($("style")).sheet),m=d.__svelte_rules||(d.__svelte_rules={});m[f]||(m[f]=!0,p.insertRule(`@keyframes ${f} ${a}`,p.cssRules.length));const h=t.style.animation||"";return t.style.animation=`${h?h+", ":""}${f} ${o}ms linear ${s}ms 1 both`,N+=1,f}function E(t,e){const n=(t.style.animation||"").split(", "),o=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),s=n.length-o.length;s&&(t.style.animation=o.join(", "),N-=s,N||a(()=>{N||(S.forEach(t=>{const e=t.__svelte_stylesheet;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.__svelte_rules={}}),S.clear())}))}function A(t){C=t}function P(){if(!C)throw new Error("Function called outside component initialization");return C}const O=[],L=[],D=[],M=[],F=Promise.resolve();let I=!1;function j(t){D.push(t)}let K=!1;const T=new Set;function V(){if(!K){K=!0;do{for(let t=0;t<O.length;t+=1){const e=O[t];A(e),B(e.$$)}for(O.length=0;L.length;)L.pop()();for(let t=0;t<D.length;t+=1){const e=D[t];T.has(e)||(T.add(e),e())}D.length=0}while(O.length);for(;M.length;)M.pop()();I=!1,K=!1,T.clear()}}function B(t){if(null!==t.fragment){t.update(),s(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(j)}}let G;function R(t,e,n){t.dispatchEvent(function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(`${e?"intro":"outro"}${n}`))}const U=new Set;let q;function H(){q={r:0,c:[],p:q}}function J(){q.r||s(q.c),q=q.p}function Y(t,e){t&&t.i&&(U.delete(t),t.i(e))}function W(t,e,n,o){if(t&&t.o){if(U.has(t))return;U.add(t),q.c.push(()=>{U.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}}const Q={duration:0};function X(n,o,c,l){let u=o(n,c),p=l?0:1,m=null,h=null,g=null;function $(){g&&E(n,g)}function v(t,e){const n=t.b-p;return e*=Math.abs(n),{a:p,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function y(o){const{delay:r=0,duration:c=300,easing:l=e,tick:y=t,css:w}=u||Q,b={start:i()+r,b:o};o||(b.group=q,q.r+=1),m?h=b:(w&&($(),g=z(n,p,o,c,r,l,w)),o&&y(0,1),m=v(b,c),j(()=>R(n,o,"start")),function(t){let e;0===f.size&&a(d),new Promise(n=>{f.add(e={c:t,f:n})})}(t=>{if(h&&t>h.start&&(m=v(h,c),h=null,R(n,m.b,"start"),w&&($(),g=z(n,p,m.b,m.duration,0,l,u.css))),m)if(t>=m.end)y(p=m.b,1-p),R(n,m.b,"end"),h||(m.b?$():--m.group.r||s(m.group.c)),m=null;else if(t>=m.start){const e=t-m.start;p=m.a+m.d*l(e/m.duration),y(p,1-p)}return!(!m&&!h)}))}return{run(t){r(u)?(G||(G=Promise.resolve(),G.then(()=>{G=null})),G).then(()=>{u=u(),y(t)}):y(t)},end(){$(),m=h=null}}}function Z(t,e){W(t,1,1,()=>{e.delete(t.key)})}function tt(t){t&&t.c()}function et(t,e,o){const{fragment:c,on_mount:l,on_destroy:u,after_update:i}=t.$$;c&&c.m(e,o),j(()=>{const e=l.map(n).filter(r);u?u.push(...e):s(e),t.$$.on_mount=[]}),i.forEach(j)}function nt(t,e){const n=t.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ot(t,e){-1===t.$$.dirty[0]&&(O.push(t),I||(I=!0,F.then(V)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function st(e,n,r,c,l,u,i=[-1]){const a=C;A(e);const f=n.props||{},d=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:l,bound:o(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:[]),callbacks:o(),dirty:i};let p=!1;if(d.ctx=r?r(e,f,(t,n,...o)=>{const s=o.length?o[0]:n;return d.ctx&&l(d.ctx[t],d.ctx[t]=s)&&(d.bound[t]&&d.bound[t](s),p&&ot(e,t)),n}):[],d.update(),p=!0,s(d.before_update),d.fragment=!!c&&c(d.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);d.fragment&&d.fragment.l(t),t.forEach(h)}else d.fragment&&d.fragment.c();n.intro&&Y(e.$$.fragment),et(e,n.target,n.anchor),V()}A(a)}class rt{$destroy(){nt(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}function ct(t){let e,n;return{c(){e=$("img"),_(e,"loading","lazy"),e.src!==(n=t[1])&&_(e,"src",n),_(e,"alt",""),_(e,"class","svelte-okjk95")},m(t,n){m(t,e,n)},p(t,o){2&o&&e.src!==(n=t[1])&&_(e,"src",n)},d(t){t&&h(e)}}}function lt(e){let n,o,s,r,c,l,u=e[0].link.title+"",i=e[1]&&ct(e);return{c(){n=$("a"),o=$("div"),i&&i.c(),s=y(),r=$("p"),c=v(u),_(r,"class","svelte-okjk95"),_(o,"class","link svelte-okjk95"),_(n,"href",l=e[0].link.url),_(n,"target","_blank")},m(t,e){m(t,n,e),p(n,o),i&&i.m(o,null),p(o,s),p(o,r),p(r,c)},p(t,[e]){t[1]?i?i.p(t,e):(i=ct(t),i.c(),i.m(o,s)):i&&(i.d(1),i=null),1&e&&u!==(u=t[0].link.title+"")&&x(c,u),1&e&&l!==(l=t[0].link.url)&&_(n,"href",l)},i:t,o:t,d(t){t&&h(n),i&&i.d()}}}function ut(t,e,n){let o,{att:s}=e;if(s.link.photo){const t=Object.keys(s.link.photo).filter(t=>t.includes("photo")),e=Math.floor(t.length/2);o=s.link.photo[t[e]]}return t.$set=t=>{"att"in t&&n(0,s=t.att)},[s,o]}class it extends rt{constructor(t){super(),st(this,t,ut,lt,c,{att:0})}}function at(e){let n,o;return{c(){n=$("img"),_(n,"loading","lazy"),n.src!==(o=e[0])&&_(n,"src",o),_(n,"alt",""),_(n,"srcset",""),_(n,"class","svelte-wwxt9")},m(t,e){m(t,n,e)},p:t,i:t,o:t,d(t){t&&h(n)}}}function ft(t,e,n){let{photo:o}=e;const s=function(t,e){const n=Object.keys(t).filter(t=>t.includes("photo"));let o;for(let s=0;s<n.length;s++){if(n[s].split("_")[1]>=e||s===n.length-1){o=t[n[s]];break}}return o}(o,600);return t.$set=t=>{"photo"in t&&n(1,o=t.photo)},[s,o]}class dt extends rt{constructor(t){super(),st(this,t,ft,at,c,{photo:1})}}function pt(e){let n,o;return{c(){n=$("video"),n.src!==(o=e[1])&&_(n,"src",o),_(n,"poster",e[0]),_(n,"preload","none"),n.controls=!0,_(n,"type","video/mp4"),_(n,"class","svelte-11r8rfd")},m(t,e){m(t,n,e)},p:t,i:t,o:t,d(t){t&&h(n)}}}function mt(t,e,n){let{att:o}=e;const s=o.doc.preview.photo.sizes[0].src,r=o.doc.preview.video&&o.doc.preview.video.src||o.doc.url;return t.$set=t=>{"att"in t&&n(2,o=t.att)},[s,r,o]}class ht extends rt{constructor(t){super(),st(this,t,mt,pt,c,{att:2})}}function gt(e){let n,o,s,r=JSON.stringify(e[0])+"";return{c(){n=$("p"),o=v("Unsupported attachment: "),s=v(r),_(n,"class","svelte-3z90vw")},m(t,e){m(t,n,e),p(n,o),p(n,s)},p(t,e){1&e&&r!==(r=JSON.stringify(t[0])+"")&&x(s,r)},i:t,o:t,d(t){t&&h(n)}}}function $t(e){let n,o,s,r=e[0].podcast.title+"";return{c(){n=$("p"),o=v("Podcast: "),s=v(r),_(n,"class","svelte-3z90vw")},m(t,e){m(t,n,e),p(n,o),p(n,s)},p(t,e){1&e&&r!==(r=t[0].podcast.title+"")&&x(s,r)},i:t,o:t,d(t){t&&h(n)}}}function vt(t){let e;const n=new it({props:{att:t[0]}});return{c(){tt(n.$$.fragment)},m(t,o){et(n,t,o),e=!0},p(t,e){const o={};1&e&&(o.att=t[0]),n.$set(o)},i(t){e||(Y(n.$$.fragment,t),e=!0)},o(t){W(n.$$.fragment,t),e=!1},d(t){nt(n,t)}}}function yt(e){let n,o,s,r=e[0].doc.title+"";return{c(){n=$("p"),o=v("Doc: "),s=v(r),_(n,"class","svelte-3z90vw")},m(t,e){m(t,n,e),p(n,o),p(n,s)},p(t,e){1&e&&r!==(r=t[0].doc.title+"")&&x(s,r)},i:t,o:t,d(t){t&&h(n)}}}function wt(t){let e;const n=new ht({props:{att:t[0]}});return{c(){tt(n.$$.fragment)},m(t,o){et(n,t,o),e=!0},p(t,e){const o={};1&e&&(o.att=t[0]),n.$set(o)},i(t){e||(Y(n.$$.fragment,t),e=!0)},o(t){W(n.$$.fragment,t),e=!1},d(t){nt(n,t)}}}function bt(t){let e,n,o;const s=new dt({props:{photo:t[0].video}});return{c(){e=$("span"),e.textContent="Video frame:",n=y(),tt(s.$$.fragment),_(e,"class","svelte-3z90vw")},m(t,r){m(t,e,r),m(t,n,r),et(s,t,r),o=!0},p(t,e){const n={};1&e&&(n.photo=t[0].video),s.$set(n)},i(t){o||(Y(s.$$.fragment,t),o=!0)},o(t){W(s.$$.fragment,t),o=!1},d(t){t&&h(e),t&&h(n),nt(s,t)}}}function _t(t){let e;const n=new dt({props:{photo:t[0].photo}});return{c(){tt(n.$$.fragment)},m(t,o){et(n,t,o),e=!0},p(t,e){const o={};1&e&&(o.photo=t[0].photo),n.$set(o)},i(t){e||(Y(n.$$.fragment,t),e=!0)},o(t){W(n.$$.fragment,t),e=!1},d(t){nt(n,t)}}}function xt(t){let e,n,o,s;const r=[_t,bt,wt,yt,vt,$t,gt],c=[];function l(t,e){return"photo"===t[0].type?0:"video"===t[0].type?1:"doc"===t[0].type&&"gif"===t[0].doc.ext?2:"doc"===t[0].type&&"pdf"===t[0].doc.ext?3:"link"===t[0].type?4:"podcast"===t[0].type?5:"podcast"===t[0].type?6:-1}return~(n=l(t))&&(o=c[n]=r[n](t)),{c(){e=$("div"),o&&o.c()},m(t,o){m(t,e,o),~n&&c[n].m(e,null),s=!0},p(t,[s]){let u=n;n=l(t),n===u?~n&&c[n].p(t,s):(o&&(H(),W(c[u],1,1,()=>{c[u]=null}),J()),~n?(o=c[n],o||(o=c[n]=r[n](t),o.c()),Y(o,1),o.m(e,null)):o=null)},i(t){s||(Y(o),s=!0)},o(t){W(o),s=!1},d(t){t&&h(e),~n&&c[n].d()}}}function kt(t,e,n){let{att:o}=e;return t.$set=t=>{"att"in t&&n(0,o=t.att)},[o]}class St extends rt{constructor(t){super(),st(this,t,kt,xt,c,{att:0})}}function Ct(t,e,n){const o=t.slice();return o[13]=e[n],o[15]=n,o}function Nt(t,e,n){const o=t.slice();return o[13]=e[n],o[15]=n,o}function zt(t){let e,n;return{c(){e=$("img"),_(e,"class","seen-icon svelte-dzp34a"),e.src!==(n="./icons/eye.svg")&&_(e,"src","./icons/eye.svg"),_(e,"alt","")},m(t,n){m(t,e,n)},d(t){t&&h(e)}}}function Et(e){let n;return{c(){n=$("h4"),n.textContent=""+e[6]},m(t,e){m(t,n,e)},p:t,d(t){t&&h(n)}}}function At(e){let n;const o=new St({props:{att:e[13]}});return{c(){tt(o.$$.fragment)},m(t,e){et(o,t,e),n=!0},p:t,i(t){n||(Y(o.$$.fragment,t),n=!0)},o(t){W(o.$$.fragment,t),n=!1},d(t){nt(o,t)}}}function Pt(e){let n,o,s,r,c,l,u,i=e[5].text&&function(e){let n;return{c(){n=$("p"),n.textContent=""+e[5].text,_(n,"class","text svelte-dzp34a")},m(t,e){m(t,n,e)},p:t,d(t){t&&h(n)}}}(e),a=e[5].attachments&&function(t){let e,n,o=t[5].attachments,s=[];for(let e=0;e<o.length;e+=1)s[e]=Ot(Ct(t,o,e));const r=t=>W(s[t],1,1,()=>{s[t]=null});return{c(){for(let t=0;t<s.length;t+=1)s[t].c();e=w()},m(t,o){for(let e=0;e<s.length;e+=1)s[e].m(t,o);m(t,e,o),n=!0},p(t,n){if(32&n){let c;for(o=t[5].attachments,c=0;c<o.length;c+=1){const r=Ct(t,o,c);s[c]?(s[c].p(r,n),Y(s[c],1)):(s[c]=Ot(r),s[c].c(),Y(s[c],1),s[c].m(e.parentNode,e))}for(H(),c=o.length;c<s.length;c+=1)r(c);J()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)Y(s[t]);n=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)W(s[t]);n=!1},d(t){g(s,t),t&&h(e)}}}(e);return{c(){n=$("div"),o=$("p"),o.textContent=""+e[5].date,s=y(),r=$("h4"),r.textContent=""+e[5].sourceName,c=y(),i&&i.c(),l=y(),a&&a.c(),_(o,"class","date svelte-dzp34a"),_(n,"class","post repost svelte-dzp34a")},m(t,e){m(t,n,e),p(n,o),p(n,s),p(n,r),p(n,c),i&&i.m(n,null),p(n,l),a&&a.m(n,null),u=!0},p(t,e){t[5].text&&i.p(t,e),t[5].attachments&&a.p(t,e)},i(t){u||(Y(a),u=!0)},o(t){W(a),u=!1},d(t){t&&h(n),i&&i.d(),a&&a.d()}}}function Ot(e){let n;const o=new St({props:{att:e[13]}});return{c(){tt(o.$$.fragment)},m(t,e){et(o,t,e),n=!0},p:t,i(t){n||(Y(o.$$.fragment,t),n=!0)},o(t){W(o.$$.fragment,t),n=!1},d(t){nt(o,t)}}}function Lt(e){let n,o,s,r,c,l,u,i,a,f,d,b,x,S=e[0].seen&&zt(),C=e[1]&&Et(e),N=e[7]&&function(e){let n;return{c(){n=$("p"),n.textContent=""+e[7],_(n,"class","text svelte-dzp34a")},m(t,e){m(t,n,e)},p:t,d(t){t&&h(n)}}}(e),z=e[8]&&function(t){let e,n,o=t[8],s=[];for(let e=0;e<o.length;e+=1)s[e]=At(Nt(t,o,e));const r=t=>W(s[t],1,1,()=>{s[t]=null});return{c(){for(let t=0;t<s.length;t+=1)s[t].c();e=w()},m(t,o){for(let e=0;e<s.length;e+=1)s[e].m(t,o);m(t,e,o),n=!0},p(t,n){if(256&n){let c;for(o=t[8],c=0;c<o.length;c+=1){const r=Nt(t,o,c);s[c]?(s[c].p(r,n),Y(s[c],1)):(s[c]=At(r),s[c].c(),Y(s[c],1),s[c].m(e.parentNode,e))}for(H(),c=o.length;c<s.length;c+=1)r(c);J()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)Y(s[t]);n=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)W(s[t]);n=!1},d(t){g(s,t),t&&h(e)}}}(e),E=e[5]&&Pt(e);return{c(){n=$("div"),o=$("div"),S&&S.c(),s=y(),r=$("span"),r.textContent=""+e[4],c=y(),C&&C.c(),l=y(),N&&N.c(),u=y(),z&&z.c(),i=y(),E&&E.c(),a=y(),f=$("p"),d=$("a"),b=v(e[3]),_(r,"class","date svelte-dzp34a"),_(o,"class","corner svelte-dzp34a"),_(d,"href",e[3]),_(d,"target","_blank"),_(n,"class","post svelte-dzp34a"),_(n,"data-post-uid",e[9]),k(n,"seen",e[0].seen)},m(t,h){m(t,n,h),p(n,o),S&&S.m(o,null),p(o,s),p(o,r),p(n,c),C&&C.m(n,null),p(n,l),N&&N.m(n,null),p(n,u),z&&z.m(n,null),p(n,i),E&&E.m(n,null),p(n,a),p(n,f),p(f,d),p(d,b),e[12](n),x=!0},p(t,[e]){t[0].seen?S||(S=zt(),S.c(),S.m(o,s)):S&&(S.d(1),S=null),t[1]?C?C.p(t,e):(C=Et(t),C.c(),C.m(n,l)):C&&(C.d(1),C=null),t[7]&&N.p(t,e),t[8]&&z.p(t,e),t[5]&&E.p(t,e),1&e&&k(n,"seen",t[0].seen)},i(t){x||(Y(z),Y(E),x=!0)},o(t){W(z),W(E),x=!1},d(t){t&&h(n),S&&S.d(),C&&C.d(),N&&N.d(),z&&z.d(),E&&E.d(),e[12](null)}}}function Dt(t,e,n){let{post:o}=e,{observer:s}=e,{showPostSource:r}=e;const{postUrl:c,date:l,repost:u,sourceName:i,text:a,attachments:f,uid:d,seen:p}=o;let m;var h;return h=()=>{s&&s.observe(m)},P().$$.on_mount.push(h),function(t){P().$$.on_destroy.push(t)}(()=>{s&&s.unobserve(m)}),t.$set=t=>{"post"in t&&n(0,o=t.post),"observer"in t&&n(10,s=t.observer),"showPostSource"in t&&n(1,r=t.showPostSource)},[o,r,m,c,l,u,i,a,f,d,s,p,function(t){L[t?"unshift":"push"](()=>{n(2,m=t)})}]}class Mt extends rt{constructor(t){super(),st(this,t,Dt,Lt,c,{post:0,observer:10,showPostSource:1})}}const Ft=[];function It(e,n=t){let o;const s=[];function r(t){if(c(e,t)&&(e=t,o)){const t=!Ft.length;for(let t=0;t<s.length;t+=1){const n=s[t];n[1](),Ft.push(n,e)}if(t){for(let t=0;t<Ft.length;t+=2)Ft[t][0](Ft[t+1]);Ft.length=0}}}return{set:r,update:function(t){r(t(e))},subscribe:function(c,l=t){const u=[c,l];return s.push(u),1===s.length&&(o=n(r)||t),c(e),()=>{const t=s.indexOf(u);-1!==t&&s.splice(t,1),0===s.length&&(o(),o=null)}}}}function jt(t){return new Date(1e3*t)}function Kt(t){return`${t.getFullYear()}-${t.getMonth()}-${t.getDate()}`}class Tt{static hasPostBeenSeen(t){return function(t,e){const n=localStorage.getItem("seenPosts_"+Kt(e));return!!n&&n.includes(t+";")}(`${t.source_id}_${t.post_id}`,jt(t.date))}constructor(t,e){this.sourceName=e[-t.source_id],this.uid=`${t.source_id}_${t.post_id}`,this.postUrl="https://vk.com/wall"+this.uid,this._date=jt(t.date),this.date=this._date.toLocaleString("ru"),this.text=t.text,this.seen=Tt.hasPostBeenSeen(t);const[n]=t.copy_history||[];n&&(this.repost={sourceName:e[-n.from_id],date:jt(n.date).toLocaleString("ru"),attachments:n.attachments,text:n.text}),this.attachments=t.attachments}markSeen(){this.seen||(!function(t,e){const n="seenPosts_"+Kt(e),o=localStorage.getItem(n)||"";localStorage.setItem(n,`${o}${t};`)}(this.uid,this._date),this.seen=!0)}}const Vt="EMPTY",Bt="LOADING",Gt="LOADED",Rt="FAILED",Ut=function(){const t={status:Vt,feedName:"All",feeds:{All:[]},feed:[]},e=[],{subscribe:n,set:o,update:s}=It(t);return{subscribe:n,load:async()=>{let t;s(e=>(t=e.feedName,{...e,status:Bt}));try{const e=await new Promise((t,e)=>{VK.Api.call("newsfeed.get",{v:"5.73",return_banned:0,count:100,filters:"post",source_ids:"groups,pages"},(function(n){const{response:o}=n;if(!o)return void e(n);const s=function(t){const e={};return t.forEach(t=>{e[t.id]=t.name}),e}(o.groups),r=o.items.filter(t=>!Tt.hasPostBeenSeen(t)).map(t=>new Tt(t,s));var c,l;t({All:r,...(c=r,l="sourceName",c.reduce((function(t,e){return(t[e[l]]=t[e[l]]||[]).push(e),t}),{}))})}))}),n=e[t]?t:"All",s=e[n];o({status:Gt,feeds:e,feedName:n,feed:s})}catch(t){console.error(t),o({status:Rt})}},reset:()=>{o(t)},setFeed:t=>{s(e=>({...e,feedName:t,feed:e.feeds[t].filter(t=>!t.seen)})),e.forEach(t=>{t()})},onFeedChanged:t=>{e.push(t)},markSeen:t=>{s(e=>(e.feed.find(e=>e.uid===t).markSeen(),e))},markFeedSeen:()=>{s(t=>(t.feed.forEach(t=>t.markSeen()),t))}}}();function qt(t,e,n){const o=t.slice();return o[4]=e[n],o[6]=n,o}function Ht(t,e){let n,o;const s=new Mt({props:{post:e[4],observer:e[2],showPostSource:e[0]}});return{key:t,first:null,c(){n=w(),tt(s.$$.fragment),this.first=n},m(t,e){m(t,n,e),et(s,t,e),o=!0},p(t,e){const n={};2&e&&(n.post=t[4]),1&e&&(n.showPostSource=t[0]),s.$set(n)},i(t){o||(Y(s.$$.fragment,t),o=!0)},o(t){W(s.$$.fragment,t),o=!1},d(t){t&&h(n),nt(s,t)}}}function Jt(t){let e,n,o=[],s=new Map,r=t[1].feed;const c=t=>t[4].uid;for(let e=0;e<r.length;e+=1){let n=qt(t,r,e),l=c(n);s.set(l,o[e]=Ht(l,n))}return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=w()},m(t,s){for(let e=0;e<o.length;e+=1)o[e].m(t,s);m(t,e,s),n=!0},p(t,[n]){if(7&n){const r=t[1].feed;H(),o=function(t,e,n,o,s,r,c,l,u,i,a,f){let d=t.length,p=r.length,m=d;const h={};for(;m--;)h[t[m].key]=m;const g=[],$=new Map,v=new Map;for(m=p;m--;){const t=f(s,r,m),l=n(t);let u=c.get(l);u?o&&u.p(t,e):(u=i(l,t),u.c()),$.set(l,g[m]=u),l in h&&v.set(l,Math.abs(m-h[l]))}const y=new Set,w=new Set;function b(t){Y(t,1),t.m(l,a,c.has(t.key)),c.set(t.key,t),a=t.first,p--}for(;d&&p;){const e=g[p-1],n=t[d-1],o=e.key,s=n.key;e===n?(a=e.first,d--,p--):$.has(s)?!c.has(o)||y.has(o)?b(e):w.has(s)?d--:v.get(o)>v.get(s)?(w.add(o),b(e)):(y.add(s),d--):(u(n,c),d--)}for(;d--;){const e=t[d];$.has(e.key)||u(e,c)}for(;p;)b(g[p-1]);return g}(o,n,c,1,t,r,s,e.parentNode,Z,Ht,e,qt),J()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)Y(o[t]);n=!0}},o(t){for(let t=0;t<o.length;t+=1)W(o[t]);n=!1},d(t){for(let e=0;e<o.length;e+=1)o[e].d(t);t&&h(e)}}}function Yt(t,e,n){let o;l(t,Ut,t=>n(1,o=t));const s=new IntersectionObserver((t,e)=>{t.forEach(t=>{const{boundingClientRect:n,isIntersecting:o,target:s}=t;if(!o&&n.bottom<=0){const{postUid:t}=s.dataset;Ut.markSeen(t),e.unobserve(s)}})},{threshold:0});let r;return t.$$.update=()=>{2&t.$$.dirty&&n(0,r="All"===o.feedName)},[r,o,s]}class Wt extends rt{constructor(t){super(),st(this,t,Yt,Jt,c,{})}}function Qt(e){let n,o,s,r;return{c(){n=v("Icons made by\n"),o=$("a"),o.textContent="Kiranshastry",s=v("\nfrom\n"),r=$("a"),r.textContent="www.flaticon.com",_(o,"href","https://www.flaticon.com/authors/kiranshastry"),_(o,"title","Kiranshastry"),_(r,"href","https://www.flaticon.com/"),_(r,"title","Flaticon")},m(t,e){m(t,n,e),m(t,o,e),m(t,s,e),m(t,r,e)},p:t,i:t,o:t,d(t){t&&h(n),t&&h(o),t&&h(s),t&&h(r)}}}class Xt extends rt{constructor(t){super(),st(this,t,null,Qt,c,{})}}const Zt=8194..toString();VK.init({apiId:7412293});const te="LOADING",ee="LOGGED_IN",ne="LOGGED_OUT",oe=function(){const{subscribe:t,set:e}=It(te);return(async()=>{try{const t=await new Promise((t,e)=>{VK.Auth.getLoginStatus(({status:e})=>{t("connected"===e)})});e(t?ee:ne)}catch(t){console.error(t),e(ne)}})(),{subscribe:t,login:async()=>{try{await new Promise((t,e)=>{VK.Auth.login(n=>{"connected"===n.status?t(n):e(n)},Zt)})&&e(ee)}catch(t){console.error(t),e(ne)}},logout:async()=>{await new Promise((t,e)=>{VK.Auth.logout(()=>{t()})}),e(ne),localStorage.clear()}}}();function se(t){let e,n,o,s,r,c,l;return{c(){e=$("span"),n=v(t[0]),o=v(" ("),s=v(t[1]),r=v("/"),c=v(t[2]),l=v(")"),_(e,"class","title svelte-1asneev")},m(t,u){m(t,e,u),p(e,n),p(e,o),p(e,s),p(e,r),p(e,c),p(e,l)},p(t,e){1&e&&x(n,t[0]),2&e&&x(s,t[1]),4&e&&x(c,t[2])},d(t){t&&h(e)}}}function re(e){let n,o;return{c(){n=$("button"),n.innerHTML='<img class="exit-icon svelte-1asneev" src="icons/door.svg" alt="">',_(n,"class","logout-btn svelte-1asneev")},m(t,e,s){m(t,n,e),s&&o(),o=b(n,"click",le)},p:t,d(t){t&&h(n),o()}}}function ce(e){let n,o,s=e[2]&&se(e),r=e[3]===ee&&re();return{c(){n=$("nav"),s&&s.c(),o=y(),r&&r.c(),_(n,"class","svelte-1asneev")},m(t,e){m(t,n,e),s&&s.m(n,null),p(n,o),r&&r.m(n,null)},p(t,[e]){t[2]?s?s.p(t,e):(s=se(t),s.c(),s.m(n,o)):s&&(s.d(1),s=null),t[3]===ee?r?r.p(t,e):(r=re(),r.c(),r.m(n,null)):r&&(r.d(1),r=null)},i:t,o:t,d(t){t&&h(n),s&&s.d(),r&&r.d()}}}function le(){confirm("Are you sure?")&&oe.logout()}function ue(t,e,n){let o,s,r,c,u;return l(t,Ut,t=>n(4,o=t)),l(t,oe,t=>n(3,s=t)),t.$$.update=()=>{16&t.$$.dirty&&n(0,r=o.feedName),16&t.$$.dirty&&n(1,c=o.feed.filter(t=>t.seen).length),16&t.$$.dirty&&n(2,u=o.feed.length)},[r,c,u,s]}class ie extends rt{constructor(t){super(),st(this,t,ue,ce,c,{})}}function ae(t){const e=t-1;return e*e*e+1}function fe(t){return--t*t*t*t*t+1}function de(t,{delay:e=0,duration:n=400,easing:o=ae,x:s=0,y:r=0,opacity:c=0}){const l=getComputedStyle(t),u=+l.opacity,i="none"===l.transform?"":l.transform,a=u*(1-c);return{delay:e,duration:n,easing:o,css:(t,e)=>`\n\t\t\ttransform: ${i} translate(${(1-t)*s}px, ${(1-t)*r}px);\n\t\t\topacity: ${u-a*e}`}}function pe(t,e,n){const o=t.slice();return o[10]=e[n],o}function me(t){let e,n,o,r,c,l,u,i,a,f=t[6](t[2]),d=[];for(let e=0;e<f.length;e+=1)d[e]=$e(pe(t,f,e));let v=null;return f.length||(v=ge()),{c(){e=$("div"),n=y(),o=$("div"),r=$("div");for(let t=0;t<d.length;t+=1)d[t].c();v&&v.c(),c=y(),l=$("button"),l.textContent="Close",_(e,"class","paranja svelte-18zm574"),_(r,"class","feeds svelte-18zm574"),_(l,"class","close svelte-18zm574"),_(o,"class","popup shadow svelte-18zm574")},m(u,f,h){m(u,e,f),m(u,n,f),m(u,o,f),p(o,r);for(let t=0;t<d.length;t+=1)d[t].m(r,null);v&&v.m(r,null),p(o,c),p(o,l),i=!0,h&&s(a),a=[b(e,"click",t[4]),b(l,"click",t[4])]},p(t,e){if(102&e){let n;for(f=t[6](t[2]),n=0;n<f.length;n+=1){const o=pe(t,f,n);d[n]?d[n].p(o,e):(d[n]=$e(o),d[n].c(),d[n].m(r,null))}for(;n<d.length;n+=1)d[n].d(1);d.length=f.length,f.length?v&&(v.d(1),v=null):v||(v=ge(),v.c(),v.m(r,null))}},i(e){i||(j(()=>{u||(u=X(o,de,t[3],!0)),u.run(1)}),i=!0)},o(e){u||(u=X(o,de,t[3],!1)),u.run(0),i=!1},d(t){t&&h(e),t&&h(n),t&&h(o),g(d,t),v&&v.d(),t&&u&&u.end(),s(a)}}}function he(e){let n,o,s,r;return{c(){n=$("button"),n.innerHTML='<img class="filter-icon svelte-18zm574" src="icons/filter.svg" alt="">',_(n,"class","filter-btn shadow svelte-18zm574")},m(t,o,c){m(t,n,o),s=!0,c&&r(),r=b(n,"click",e[4])},p:t,i(t){s||(j(()=>{o||(o=X(n,de,e[3],!0)),o.run(1)}),s=!0)},o(t){o||(o=X(n,de,e[3],!1)),o.run(0),s=!1},d(t){t&&h(n),t&&o&&o.end(),r()}}}function ge(t){let e;return{c(){e=v("There's no unseen posts!")},m(t,n){m(t,e,n)},d(t){t&&h(e)}}}function $e(t){let e,n,o,r,c,l,u,i,a,f=t[10].name+"",d=t[10].unseen+"";return{c(){e=$("label"),n=$("input"),r=y(),c=v(f),l=v(" ("),u=v(d),i=v(")\n        "),_(n,"type","radio"),n.__value=o=t[10].name,n.value=n.__value,t[9][0].push(n),_(e,"class","feed svelte-18zm574")},m(o,f,d){m(o,e,f),p(e,n),n.checked=n.__value===t[1],p(e,r),p(e,c),p(e,l),p(e,u),p(e,i),d&&s(a),a=[b(n,"change",t[8]),b(n,"change",t[5])]},p(t,e){4&e&&o!==(o=t[10].name)&&(n.__value=o),n.value=n.__value,2&e&&(n.checked=n.__value===t[1]),4&e&&f!==(f=t[10].name+"")&&x(c,f),4&e&&d!==(d=t[10].unseen+"")&&x(u,d)},d(o){o&&h(e),t[9][0].splice(t[9][0].indexOf(n),1),s(a)}}}function ve(t){let e,n,o,s;const r=[he,me],c=[];function l(t,e){return t[0]?0:1}return e=l(t),n=c[e]=r[e](t),{c(){n.c(),o=w()},m(t,n){c[e].m(t,n),m(t,o,n),s=!0},p(t,[s]){let u=e;e=l(t),e===u?c[e].p(t,s):(H(),W(c[u],1,1,()=>{c[u]=null}),J(),n=c[e],n||(n=c[e]=r[e](t),n.c()),Y(n,1),n.m(o.parentNode,o))},i(t){s||(Y(n),s=!0)},o(t){W(n),s=!1},d(t){c[e].d(t),t&&h(o)}}}function ye(t,e,n){let o;l(t,Ut,t=>n(2,o=t));const s={y:1e3,opacity:.5,easing:fe};let r=!0;function c(){n(0,r=!r)}let u=o.feedName;function i(t){return o.feeds[t].filter(t=>!t.seen).length}return[r,u,o,s,c,function(){Ut.setFeed(u),c()},function(t){return Object.keys(t.feeds).map(t=>({name:t,unseen:i(t)})).filter(t=>t.unseen>0)},i,function(){u=this.__value,n(1,u)},[[]]]}class we extends rt{constructor(t){super(),st(this,t,ye,ve,c,{})}}function be(e){let n;return{c(){n=$("p"),n.textContent="Loading...",_(n,"class","centered svelte-dmrcf")},m(t,e){m(t,n,e)},p:t,i:t,o:t,d(t){t&&h(n)}}}function _e(t){let e,n,o,s;const r=[Se,ke],c=[];function l(t,e){return t[1].status===Gt?0:1}return e=l(t),n=c[e]=r[e](t),{c(){n.c(),o=w()},m(t,n){c[e].m(t,n),m(t,o,n),s=!0},p(t,s){let u=e;e=l(t),e===u?c[e].p(t,s):(H(),W(c[u],1,1,()=>{c[u]=null}),J(),n=c[e],n||(n=c[e]=r[e](t),n.c()),Y(n,1),n.m(o.parentNode,o))},i(t){s||(Y(n),s=!0)},o(t){W(n),s=!1},d(t){c[e].d(t),t&&h(o)}}}function xe(e){let n,o,s;return{c(){n=$("p"),o=$("button"),o.textContent="Log in with VK",_(n,"class","centered svelte-dmrcf")},m(t,e,r){m(t,n,e),p(n,o),r&&s(),s=b(o,"click",Pe)},p:t,i:t,o:t,d(t){t&&h(n),s()}}}function ke(e){let n;return{c(){n=$("p"),n.textContent="Loading posts...",_(n,"class","centered svelte-dmrcf")},m(t,e){m(t,n,e)},p:t,i:t,o:t,d(t){t&&h(n)}}}function Se(t){let e,n,o,s;const r=[Ne,Ce],c=[];function l(t,e){return t[1].feed.length>0?0:1}return e=l(t),n=c[e]=r[e](t),{c(){n.c(),o=w()},m(t,n){c[e].m(t,n),m(t,o,n),s=!0},p(t,s){let u=e;e=l(t),e!==u&&(H(),W(c[u],1,1,()=>{c[u]=null}),J(),n=c[e],n||(n=c[e]=r[e](t),n.c()),Y(n,1),n.m(o.parentNode,o))},i(t){s||(Y(n),s=!0)},o(t){W(n),s=!1},d(t){c[e].d(t),t&&h(o)}}}function Ce(e){let n;return{c(){n=$("p"),n.textContent="There's nothing new in your feed! Well done!",_(n,"class","centered svelte-dmrcf")},m(t,e){m(t,n,e)},i:t,o:t,d(t){t&&h(n)}}}function Ne(t){let e;const n=new Wt({});return{c(){tt(n.$$.fragment)},m(t,o){et(n,t,o),e=!0},i(t){e||(Y(n.$$.fragment,t),e=!0)},o(t){W(n.$$.fragment,t),e=!1},d(t){nt(n,t)}}}function ze(e){let n,o,s;return{c(){n=$("p"),o=$("button"),o.textContent="Mark all as read",_(o,"class","refresh-button svelte-dmrcf"),_(n,"class","centered svelte-dmrcf")},m(t,e,r){m(t,n,e),p(n,o),r&&s(),s=b(o,"click",Oe)},p:t,d(t){t&&h(n),s()}}}function Ee(t){let e;const n=new we({});return{c(){tt(n.$$.fragment)},m(t,o){et(n,t,o),e=!0},i(t){e||(Y(n.$$.fragment,t),e=!0)},o(t){W(n.$$.fragment,t),e=!1},d(t){nt(n,t)}}}function Ae(t){let e,n,o,s,r,c,l,u,i,a,f;const d=new ie({}),g=[xe,_e,be],v=[];function w(t,e){return t[0]===ne?0:t[0]===ee?1:2}s=w(t),r=v[s]=g[s](t);let b=t[0]===ee&&t[1].status===Gt&&t[1].feed.length&&ze();const x=new Xt({});let k=t[1].status===Gt&&Ee();return{c(){tt(d.$$.fragment),e=y(),n=$("main"),o=$("div"),r.c(),c=y(),l=$("div"),b&&b.c(),u=y(),i=$("p"),tt(x.$$.fragment),a=y(),k&&k.c(),_(o,"class","top"),_(i,"class","credits centered svelte-dmrcf"),_(l,"class","bottom svelte-dmrcf"),_(n,"class","svelte-dmrcf")},m(t,r){et(d,t,r),m(t,e,r),m(t,n,r),p(n,o),v[s].m(o,null),p(n,c),p(n,l),b&&b.m(l,null),p(l,u),p(l,i),et(x,i,null),p(n,a),k&&k.m(n,null),f=!0},p(t,[e]){let c=s;s=w(t),s===c?v[s].p(t,e):(H(),W(v[c],1,1,()=>{v[c]=null}),J(),r=v[s],r||(r=v[s]=g[s](t),r.c()),Y(r,1),r.m(o,null)),t[0]===ee&&t[1].status===Gt&&t[1].feed.length?b?b.p(t,e):(b=ze(),b.c(),b.m(l,u)):b&&(b.d(1),b=null),t[1].status===Gt?k?Y(k,1):(k=Ee(),k.c(),Y(k,1),k.m(n,null)):k&&(H(),W(k,1,1,()=>{k=null}),J())},i(t){f||(Y(d.$$.fragment,t),Y(r),Y(x.$$.fragment,t),Y(k),f=!0)},o(t){W(d.$$.fragment,t),W(r),W(x.$$.fragment,t),W(k),f=!1},d(t){nt(d,t),t&&h(e),t&&h(n),v[s].d(),b&&b.d(),nt(x),k&&k.d()}}}function Pe(){oe.login()}function Oe(){Ut.markFeedSeen()}function Le(){window.scrollTo(0,0)}function De(t,e,n){let o,s;return l(t,oe,t=>n(0,o=t)),l(t,Ut,t=>n(1,s=t)),oe.subscribe(t=>{t===ee&&Ut.load(),t===ne&&Ut.reset()}),Ut.subscribe(t=>{window.n=t}),Ut.onFeedChanged(Le),[o,s]}return history.scrollRestoration="manual",new class extends rt{constructor(t){super(),st(this,t,De,Ae,c,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
