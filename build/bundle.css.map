{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "..\\..\\App.svelte",
    "..\\..\\Attachment.svelte",
    "..\\..\\Feed.svelte",
    "..\\..\\Link.svelte",
    "..\\..\\Photo.svelte",
    "..\\..\\Post.svelte",
    "..\\..\\Video.svelte"
  ],
  "sourcesContent": [
    "<script>\r\n    import Feed from './components/Feed.svelte';\r\n    import { login, logout, getIsLoggedIn } from './vk/auth';\r\n    import { getNews } from './vk/data/news';\r\n    import { groupBy } from './utils/groupBy';\r\n    import { makeDateFromUnixTime } from './utils/makeDateFromUnixTime';\r\n\r\n    let error;\r\n    let isLoggedIn;\r\n    let news;\r\n    let newsBySources;\r\n\r\n    (async () => {\r\n        try {\r\n            isLoggedIn = await getIsLoggedIn();\r\n            if (isLoggedIn) {\r\n                news = await getNews();\r\n\r\n                const lastPostDate = makeDateFromUnixTime(\r\n                    news[news.length - 1].date\r\n                );\r\n                console.log(lastPostDate);\r\n                newsBySources = groupBy(news, 'source_name');\r\n                console.log(newsBySources);\r\n            }\r\n        } catch (e) {\r\n            error = JSON.stringify(e);\r\n        }\r\n    })();\r\n\r\n    async function handleLogoutClick() {\r\n        await logout();\r\n        isLoggedIn = false;\r\n        news = undefined;\r\n    }\r\n\r\n    async function handleLoginClick() {\r\n        try {\r\n            isLoggedIn = await login();\r\n            if (isLoggedIn) {\r\n                news = await getNews();\r\n            }\r\n        } catch (e) {\r\n            error = JSON.stringify(e);\r\n        }\r\n    }\r\n</script>\r\n\r\n<!-- prettier-ignore -->\r\n<div>\r\n    <nav>\r\n        {#if isLoggedIn}\r\n            <button on:click={handleLogoutClick} id=\"logout\">Logout</button>\r\n        {/if}\r\n    </nav>\r\n    {#if isLoggedIn === false}\r\n        <p class=\"login-wrapper\">\r\n            <button on:click={handleLoginClick} id=\"login\">Log in VK</button>\r\n        </p>\r\n    {:else if news}\r\n        <Feed {news}></Feed>\r\n    {:else if error}\r\n        <p style=\"color: red;\">{error.message}</p>\r\n    {:else}\r\n        <p>...loading</p>\r\n    {/if}\r\n</div>\r\n\r\n<style>\r\n    nav {\r\n        display: flex;\r\n        flex-direction: row;\r\n        justify-content: flex-end;\r\n        align-items: center;\r\n\r\n        background-color: #68a5eb;\r\n        height: 42px;\r\n    }\r\n\r\n    #logout {\r\n        margin: 5px;\r\n        font-size: 12px;\r\n    }\r\n    .login-wrapper {\r\n        text-align: center;\r\n    }\r\n</style>\r\n",
    "<script>\r\n    import Link from './Link.svelte';\r\n    import Photo from './Photo.svelte';\r\n    import Video from './Video.svelte';\r\n    export let att;\r\n</script>\r\n\r\n<!-- prettier-ignore -->\r\n<div>\r\n    {#if att.type === 'photo'}\r\n        <Photo photo={att.photo}></Photo>\r\n    {:else if att.type === 'video'}\r\n        Video frame:\r\n        <Photo photo={att.video}></Photo>\r\n    {:else if att.type === 'doc' && att.doc.ext === 'gif'}\r\n        <Video {att}></Video>\r\n    {:else if att.type === 'link'}\r\n        <Link {att}></Link>\r\n    {:else}\r\n        <p>Unsupported attachment: {JSON.stringify(att)}</p>\r\n    {/if}\r\n</div>\r\n\r\n<style>\r\n    p {\r\n        word-break: break-word;\r\n        max-width: 100%;\r\n    }\r\n</style>\r\n",
    "<script>\r\n    import Post from './Post.svelte';\r\n    export let news;\r\n</script>\r\n\r\n<!-- prettier-ignore -->\r\n<div class=\"feed\">\r\n    {#each news as item, i}\r\n        <Post {item}></Post>\r\n    {/each}\r\n</div>\r\n\r\n<style>\r\n    .feed {\r\n        padding: 8px;\r\n    }\r\n</style>\r\n",
    "<script>\r\n    import { selectPhoto } from '../utils/selectPhoto';\r\n\r\n    export let att;\r\n\r\n    const photoSrc = att.link.photo && selectPhoto(att.link.photo, 130);\r\n</script>\r\n\r\n<!-- prettier-ignore -->\r\n<a href=\"{att.link.url}\" target=\"_blank\">\r\n    <div class=\"link\">\r\n        {#if photoSrc}\r\n            <img loading=\"lazy\" src=\"{photoSrc}\" alt=\"\" />\r\n        {/if}\r\n        <p>{att.link.title}</p>\r\n    </div>\r\n</a>\r\n\r\n<style>\r\n    img {\r\n        width: 100%;\r\n    }\r\n    .link {\r\n        display: flex;\r\n        flex-direction: row;\r\n        align-items: center;\r\n        border: 1px solid rgba(0, 0, 0, 0.363);\r\n    }\r\n    .link img {\r\n        flex-shrink: 0;\r\n        height: 80px;\r\n        width: auto;\r\n    }\r\n    .link p {\r\n        margin: 0;\r\n        padding: 8px;\r\n    }\r\n</style>\r\n",
    "<script>\r\n    import { selectPhoto } from '../utils/selectPhoto';\r\n\r\n    export let photo;\r\n\r\n    const photoSrc = selectPhoto(photo, 600);\r\n</script>\r\n\r\n<!-- prettier-ignore -->\r\n<img loading=\"lazy\" src={photoSrc} alt=\"\" srcset=\"\">\r\n\r\n<style>\r\n    img {\r\n        width: 100%;\r\n    }\r\n</style>\r\n",
    "<script>\r\n    import Attachment from './Attachment.svelte';\r\n\r\n    export let item;\r\n\r\n    const postUrl = `https://vk.com/wall${item.source_id}_${item.post_id}`;\r\n    const date = new Date(item.date * 1000).toLocaleString('ru');\r\n    const repost = item.copy_history && item.copy_history[0];\r\n    const repostDate =\r\n        repost && new Date(repost.date * 1000).toLocaleString('ru');\r\n</script>\r\n\r\n<!-- prettier-ignore -->\r\n<div class=\"post\">\r\n    <p class=\"date\">{date}</p>\r\n    <h4>{item.source_name}</h4>\r\n    {#if item.text}\r\n        <p class=\"text\">{item.text}</p>\r\n    {/if}\r\n    {#if item.attachments}\r\n        {#each item.attachments as att, i}\r\n           <Attachment {att}></Attachment>\r\n        {/each}\r\n    {/if}\r\n    {#if repost}\r\n        <div class=\"post\">\r\n            <p class=\"date\">{repostDate}</p>\r\n            <h4>{repost.source_name}</h4>\r\n            {#if repost.text}\r\n                <p class=\"text\">{repost.text}</p>\r\n            {/if}\r\n            {#if repost.attachments}\r\n                {#each repost.attachments as att, i}\r\n                    <Attachment {att}></Attachment>\r\n                {/each}\r\n            {/if}\r\n        </div>\r\n    {/if}\r\n    <p><a href={postUrl} target=\"_blank\">{postUrl}</a></p>\r\n</div>\r\n\r\n<style>\r\n    .post {\r\n        padding: 1em;\r\n        margin-bottom: 0.5em;\r\n        position: relative;\r\n        box-shadow: 0 0 3px rgb(128, 128, 128);\r\n    }\r\n    .text {\r\n        white-space: pre-wrap;\r\n        word-break: break-word;\r\n    }\r\n    .date {\r\n        color: #505050;\r\n        position: absolute;\r\n        top: 0.5em;\r\n        right: 0.5em;\r\n        font-size: 0.75em;\r\n        margin: 0;\r\n    }\r\n</style>\r\n",
    "<script>\r\n    export let att;\r\n\r\n    // fixme choose poster based on screen size\r\n    const posterSrc = att.doc.preview.photo.sizes[0].src;\r\n    const videoSrc = att.doc.preview.video && att.doc.preview.video.src || att.doc.url;\r\n</script>\r\n\r\n<!-- prettier-ignore -->\r\n<video \r\n    src={videoSrc} \r\n    poster={posterSrc} \r\n    preload=\"none\" \r\n    controls\r\n    type=\"video/mp4\">\r\n</video>\r\n\r\n<style>\r\n    video {\r\n        width: 100%;\r\n    }\r\n</style>\r\n"
  ],
  "names": [],
  "mappings": "AAqEI,GAAG,cAAC,CAAC,AACD,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,GAAG,CACnB,eAAe,CAAE,QAAQ,CACzB,WAAW,CAAE,MAAM,CAEnB,gBAAgB,CAAE,OAAO,CACzB,MAAM,CAAE,IAAI,AAChB,CAAC,AAED,OAAO,cAAC,CAAC,AACL,MAAM,CAAE,GAAG,CACX,SAAS,CAAE,IAAI,AACnB,CAAC,AACD,cAAc,cAAC,CAAC,AACZ,UAAU,CAAE,MAAM,AACtB,CAAC;AC7DD,CAAC,eAAC,CAAC,AACC,UAAU,CAAE,UAAU,CACtB,SAAS,CAAE,IAAI,AACnB,CAAC;ACdD,KAAK,eAAC,CAAC,AACH,OAAO,CAAE,GAAG,AAChB,CAAC;ACID,GAAG,8BAAC,CAAC,AACD,KAAK,CAAE,IAAI,AACf,CAAC,AACD,KAAK,8BAAC,CAAC,AACH,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,GAAG,CACnB,WAAW,CAAE,MAAM,CACnB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,AAC1C,CAAC,AACD,oBAAK,CAAC,GAAG,eAAC,CAAC,AACP,WAAW,CAAE,CAAC,CACd,MAAM,CAAE,IAAI,CACZ,KAAK,CAAE,IAAI,AACf,CAAC,AACD,oBAAK,CAAC,CAAC,eAAC,CAAC,AACL,MAAM,CAAE,CAAC,CACT,OAAO,CAAE,GAAG,AAChB,CAAC;ACxBD,GAAG,eAAC,CAAC,AACD,KAAK,CAAE,IAAI,AACf,CAAC;AC4BD,KAAK,eAAC,CAAC,AACH,OAAO,CAAE,GAAG,CACZ,aAAa,CAAE,KAAK,CACpB,QAAQ,CAAE,QAAQ,CAClB,UAAU,CAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,AAC1C,CAAC,AACD,KAAK,eAAC,CAAC,AACH,WAAW,CAAE,QAAQ,CACrB,UAAU,CAAE,UAAU,AAC1B,CAAC,AACD,KAAK,eAAC,CAAC,AACH,KAAK,CAAE,OAAO,CACd,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,KAAK,CACV,KAAK,CAAE,KAAK,CACZ,SAAS,CAAE,MAAM,CACjB,MAAM,CAAE,CAAC,AACb,CAAC;ACzCD,KAAK,cAAC,CAAC,AACH,KAAK,CAAE,IAAI,AACf,CAAC"
}